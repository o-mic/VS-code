<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Digital twins for cyber security</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./logo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./news.html" rel="" target="">
 <span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./DigitalTwins.html" rel="" target="">
 <span class="menu-text">Digital Twins</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Criticalinfra.html" rel="" target="">
 <span class="menu-text">Critical Infrastructure Security</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./creative.html" rel="" target="">
 <span class="menu-text">Creative responses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Acknowledgements.html" rel="" target="">
 <span class="menu-text">Acknowledgements</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-digital-twin-origin" id="toc-the-digital-twin-origin" class="nav-link" data-scroll-target="#the-digital-twin-origin">The digital twin: origin</a></li>
  <li><a href="#use-cases-of-digital-twins-in-the-manufacturing-domain" id="toc-use-cases-of-digital-twins-in-the-manufacturing-domain" class="nav-link" data-scroll-target="#use-cases-of-digital-twins-in-the-manufacturing-domain">Use Cases of Digital Twins in the Manufacturing Domain</a></li>
  <li><a href="#the-digital-thread" id="toc-the-digital-thread" class="nav-link" data-scroll-target="#the-digital-thread">The digital thread</a></li>
  <li><a href="#security-use-cases-of-digital-twin" id="toc-security-use-cases-of-digital-twin" class="nav-link" data-scroll-target="#security-use-cases-of-digital-twin">Security Use Cases of Digital Twin</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Digital twins for cyber security</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><em>Research notes by Suheyb Said</em> <em>Based on the chapter by Eckhart, M., &amp; Ekelhart, A. (2019). Digital twins for cyber-physical systems security: State of the art and outlook. Security and Quality in Cyber-Physical Systems Engineering: With Forewords by Robert M. Lee and Tom Gilb, 383-412</em></p>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Cyber-Physical Systems (CPSs) are crucial for Industry 4.0, blending physical and virtual components to automate and intelligently operate various sectors. However, CPSs can be vulnerable to cyber-attacks, posing threats to public safety.</p>
<p>To address CPS security challenges, researchers explore the concept of digital twins, which are virtual replicas of physical objects, that help monitor, visualize, and predict the state of cyber-physical systems. Digital twins offer promising security-enhancing use cases for CPSs. Digital twins could enhance the security of smart factories by spotting security flaws during the design phase and supporting security testing and intrusion detection throughout the system’s lifecycle. However, creating and maintaining digital twins efficiently remains a significant research challenge due to overhead costs. Despite this the full potential and research challenges of digital twins in information security require further exploration.</p>
</section>
<section id="the-digital-twin-origin" class="level3">
<h3 class="anchored" data-anchor-id="the-digital-twin-origin">The digital twin: origin</h3>
<p>The concept of digital twins has its origins in NASA’s Apollo program, where a twin of a spacecraft was created for training and mirroring flight conditions based on data from the operational spacecraft. Over time, digital twins have evolved from physical copies to virtual models of systems due to technological advancements in simulations and connectivity.</p>
<p>The term “digital twin” was coined by <a href="https://www.nasa.gov/pdf/501321main_TA11-MSITP-DRAFT-Nov2010-A1.pdf">Shafto et al.&nbsp;(2010)</a> and initially focused on mirroring the life of air vehicles. However, in 2013, <a href="https://www.sciencedirect.com/science/article/pii/S2213846313000114">Lee et al.</a> introduced digital twins to the manufacturing sector, where they simulate physical counterparts based on physical models. This concept expanded to other areas, including health monitoring, systems engineering, and managing various phases of a system’s lifecycle.</p>
<p>The concept of digital twins has different interpretations, often leading to confusion among the stakeholders. Key requirements for digital twins include <strong>real-time data, integration, and fidelity</strong> to accurately mirror physical counterparts. While the adoption of high-fidelity simulations with real-time data integration is envisioned for the future, most of the current digital twins lack these features. Data integration, either from past lifecycles or real-time acquisition, is essential for creating virtual replicas. However, there is no consensus on the minimum level of data integration required. Industry professionals often view digital twins as simulation models of physical objects that may not receive data instantly or continuously.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Digital twin is a virtual replica of a system that accompanies its physical counterpart during phases of its lifecycle, consumes real-time and historical data if required, and has sufficient fidelity to allow the implementation of the desired security measure.</p>
</div>
</div>
</section>
<section id="use-cases-of-digital-twins-in-the-manufacturing-domain" class="level3">
<h3 class="anchored" data-anchor-id="use-cases-of-digital-twins-in-the-manufacturing-domain">Use Cases of Digital Twins in the Manufacturing Domain</h3>
<p>The digital twin concept finds various applications in the manufacturing domain throughout the lifecycle of Cyber-Physical Production Systems (CPPSs). In the engineering phase, digital twins are used to efficiently to design, test, and fabricate systems, utilising 2D/3D models and physical simulations. During the operation phase, digital twins monitor the health of CPPSs in real-time, allowing for preventive/proper maintenance and process optimisation. In the end-of-life phase, digital twins retain knowledge about the system’s life for future reuse and assist in the proper disposal of materials. Overall, digital twins enhance efficiency, reduce downtime, and optimise the lifecycle management of CPPSs (Figure 1).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CyberSystemFlow.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure 1: Engineering Life cycle of a system</figcaption>
</figure>
</div>
</section>
<section id="the-digital-thread" class="level3">
<h3 class="anchored" data-anchor-id="the-digital-thread">The digital thread</h3>
<p>The digital thread involves linking data throughout various phases of a system’s lifecycle to increase efficiency in development and deployment. It enables an unbroken data link through the lifecycle and can be utilized to generate and provide updates to a digital twin. Semantic interoperability of tools used throughout the lifecycle is essential for implementing the digital thread.</p>
<p>While the digital thread can support digital twins and enhance the security of Cyber-Physical Systems (CPSs), it also represents an attractive target for attacks, as it contains valuable data. A compromised digital thread could lead to severe consequences, such as manipulated updates that put the digital twin into a malicious state. Therefore, implementing adequate security measures to protect each link within the digital thread is crucial.</p>
</section>
<section id="security-use-cases-of-digital-twin" class="level3">
<h3 class="anchored" data-anchor-id="security-use-cases-of-digital-twin">Security Use Cases of Digital Twin</h3>
<p>Digital twins can be utilised during the engineering phase to design more secure cyber-physical systems (CPSs). They can be combined with cyber ranges to simulate attacks and evaluate potential damages, leading to more robust and fault-tolerant CPS designs. Digital twins can also help reduce the attack surface by identifying weak spots and unused network services in the CPS specification. Furthermore, they enable testing security controls layer-by-layer, aiding in the implementation of a defence in depth strategy. Additionally, digital twins can be used to evaluate containment strategies for compromised devices, facilitating incident handling during the operation phase.</p>
<section id="intrusion-detection" class="level4">
<h4 class="anchored" data-anchor-id="intrusion-detection">1. Intrusion detection</h4>
<p>The concept of digital twins can be utilised for implementing Intrusion Detection Systems (IDSs) in Cyber-Physical Systems (CPSs). Two papers, namely <a href="https://www.sqi.at/resources/Towards_Security-Aware_Virtual_Environments_for_Digital_Twins.pdf">Eckhart and Ekelhart (2018c)</a> and <a href="https://www.sqi.at/resources/Eckhart2018a.pdf">Eckhart and Ekelhart (2018b)</a>, demonstrate how digital twins can be leveraged for this purpose.</p>
<p>In Eckhart and Ekelhart (2018c), a knowledge-based intrusion detection system is implemented. It specifies misuse patterns that the system would exhibit upon a compromise. The digital twins are continuously checked for rule violations based on safety and security rules.</p>
<p>In Eckhart and Ekelhart (2018b), a state replication approach is introduced, allowing digital twins to virtually mirror the behaviour of the real CPS during operation. This approach enables the implementation of a behaviour-specification-based IDS. The digital twins receive the same inputs as their physical counterparts, and intrusion detection is achieved by comparing their inputs and outputs. This technique generally yields a low false-negative rate and is capable of detecting previously unknown attacks.</p>
</section>
<section id="detecting-hardwaresoftware-misconfigurations" class="level4">
<h4 class="anchored" data-anchor-id="detecting-hardwaresoftware-misconfigurations">2. Detecting Hardware/software misconfigurations</h4>
<p>Detecting hardware and software misconfigurations in Cyber-Physical Systems (CPSs) can be achieved using digital twins. Digital twins, which replicate the functionality of real devices, should exhibit similar characteristics to their physical counterparts. Any deviation between the virtual replicas and the actual devices may indicate malicious actions or misconfigurations. For this use case, digital twins are employed to compare the configurations of physical devices with their corresponding virtual replicas. If any manipulation or discrepancy is detected, it can signal a potential security issue or misconfiguration. It’s essential to run the digital twins in an isolated and protected environment to prevent tampering by malicious actors.</p>
</section>
<section id="security-testing" class="level4">
<h4 class="anchored" data-anchor-id="security-testing">3. Security Testing</h4>
<p>Conducting security tests in operational technology (OT) environments, especially during CPS operation, can be risky and costly. To address this, the use of digital twins has been proposed as a solution. Digital twins allow security tests to be performed virtually on the replicas instead of real systems, ensuring no disruption to live systems and reducing the need for expensive testbeds. By using digital twins, security tests can be carried out both during the operational phase and the engineering phase. In the engineering phase, vulnerabilities can be identified and fixed early in the CPS lifecycle. Moreover, the challenge lies in striking a balance between the fidelity of digital twins and the costs involved, ensuring that security tests yield valuable results while keeping expenses in check. Some approaches, like the one proposed by <a href="https://cris.bgu.ac.il/en/publications/deriving-a-cost-effective-digital-twin-of-an-ics-to-facilitate-se">Bitton et al.&nbsp;(2018 )</a>, focus on developing cost-effective specifications of digital twins to support security tests within a certain budget.</p>
</section>
<section id="privacy" class="level4">
<h4 class="anchored" data-anchor-id="privacy">4. Privacy</h4>
<p><a href="https://www.researchgate.net/publication/332998367_A_Digital_Twin-based_Privacy_Enhancement_Mechanism_for_the_Automotive_Industry">Damjanovic-Behrendt (2018b)</a> studied how digital twins can be used to protect the privacy of smart car drivers. The work explores automated privacy assessments based on a virtual replica of a smart car that continuously receives real-time data from onboard sensors. An example is given where an insurer offers usage-based insurance using data from digital twins. Machine learning methods are integrated into the digital twins to classify personal data, which is then anonymised before being transferred to the insurer, ensuring customer privacy rights are preserved and GDPR requirements are met. While the focus was on smart cars, the approach could potentially be applied to other types of CPSs, including smart grids, transportation systems, and medical CPSs, offering privacy-enhancing techniques for these domains as well.</p>
</section>
<section id="training" class="level4">
<h4 class="anchored" data-anchor-id="training">5. Training</h4>
<p>Digital twins can be used as a platform for system testing and training. Since digital twins exist virtually and operate in isolated environments, they are well-suited for testing new defences before implementation and training personnel to respond to cyber incidents. In combination with a cyber range, attacks can be launched against digital twins for training and testing purposes. The digital-twin framework proposed by Eckhart and Ekelhart (2018c) also supports system testing. Real devices can be interfaced with the framework to test their behaviour. The framework can be used to uncover weaknesses and train information security personnel in implementing effective defences in response to attacks. Data collected during these exercises can be valuable for risk assessments.</p>
</section>
<section id="secure-decommissioning" class="level4">
<h4 class="anchored" data-anchor-id="secure-decommissioning">6. Secure Decommissioning</h4>
<p>When CPSs and ICSs (Industrial Control Systems) reach their end-of-life phase, it is crucial to ensure secure decommissioning. Digital twins can assist in this process by helping to properly dispose of materials and answer questions related to media sanitization. They can also aid in ensuring that data security requirements are met during the disposal of the digital thread and the digital twins themselves. Proper archiving and secure closure of the digital twins must be ensured to prevent unauthorized access and data breaches during decommissioning.</p>
</section>
<section id="compliance" class="level4">
<h4 class="anchored" data-anchor-id="compliance">7. Compliance</h4>
<p><a href="https://people.fh-burgenland.at/server/api/core/bitstreams/eb7e0bd4-82d7-46a7-8df7-cce17dd8a8f3/content">Tauber and Schmittner (2018)</a> highlight the significance of monitoring the security and safety of Cyber-Physical Systems (CPS) during their operational phase. They propose that digital twins can play a crucial role in this process by accurately reflecting the behaviour of CPS throughout their entire lifecycle. By continuously monitoring and documenting security and safety aspects through digital twins, organizations can provide evidence of meeting security standards, such as IEC 62443, and comply with legal requirements. With increasing regulatory requirements for CPS operators, integrating security and legal compliance support into digital twins becomes valuable. This approach allows for better control and oversight of CPS operations, ensuring that they adhere to industry standards and legal obligations, thereby enhancing the overall security and resilience of critical infrastructure.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">License CC-BY-4.0<br>
Created using Quarto 1.3.433 and Midjourney 5.2</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>